[
  {
    "objectID": "HW2.html",
    "href": "HW2.html",
    "title": "Analyzing Rainwater Harvesting Time Series Data",
    "section": "",
    "text": "hw2data.csv has the daily rainfall from the Fort Collins weather station for this summer. Your task is to calculate how much rainfall would be in a rain barrel each day based on the rain inputs (supply) and the irrigation use (demand).\n\nSteps:\n\nCalculate the volume of water that could be harvested each day, assuming a roof area of 431 ft2 and an efficiency of 0.93.\nAssume the demand (water use for irrigation) is 7 gallons per day, and irrigation is only used on days without rain\nStart calculations for volume of water in the barrel on the first day with rain. The volume of water cannot exceed the barrel capacity, which is 48 gallons.\nAfter the first day with rain, the volume of water in the barrel is the previous day’s volume + current day rainfall input volume – demand volume\nThe volume in the barrel cannot be negative, so if the volume drops below zero on any day, set that day’s volume to 0\n\n\n\nDeliverables:\n\nGraph of water volume (y-axis) vs. date (x-axis). Please use an xy barrel and (b) the 100 gallon barrel scatter plot with lines, no points. Label your axes. Do not include a plot title; instead make a figure caption below the graph.\nMake the same graph as in (1) but using a 100 gallon barrel.\nCount the number of days when the barrel is empty for (a) the 48 gallon\n\n\n\nCode\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(ggplot2)\n\n\n\n\nCode\nrainwater_data = read_csv('hw2data.csv')\n\nclean_data &lt;- na.omit(rainwater_data)\n\ncapacity = 48\n\nclean_data$date &lt;- mdy(clean_data$date)\n\nclean_data$demand &lt;- ifelse(clean_data$P_in&gt;0,0,7)\n\nclean_data$volume &lt;- clean_data$P_in*431*0.93*7.48/12\n\nclean_data$vol_net &lt;- 0\n\nfor (i in 2:nrow(clean_data)) {\n  clean_data[i,'vol_net']=ifelse((clean_data[i-1,'vol_net']+clean_data[i,'volume'])&lt;=capacity,\n                                 clean_data[i-1,'vol_net']+clean_data[i,'volume']-clean_data[i,'demand'],\n                                 capacity)\n  clean_data[i,'vol_net']=ifelse(clean_data[i,'vol_net']&lt;0,0,clean_data[i,'vol_net'])\n}\n\n\n\n\nCode\nggplot()+geom_line(data = clean_data, aes(x=date, y=vol_net))+\n  ylab('Volume (gallons)')+\n  xlab('Date')\n\n\n\n\n\n\n\n\n\nFigure 1. Daily volume of water collected over summer 2025 in Fort Collins with a 48-gallon rain barrel, given a 7 gallons/day water demand.\n\n\nCode\ndays_empty_48 = sum(clean_data$vol_net == 0)\n\n\n\n\nCode\ncapacity_2nd = 100\n\ndata_100 &lt;- clean_data\n\ndata_100$vol_net &lt;- 0\n\nfor (i in 2:nrow(data_100)) {\n  data_100[i,'vol_net']=ifelse((data_100[i-1,'vol_net']+data_100[i,'volume'])&lt;=capacity_2nd,\n                               data_100[i-1,'vol_net']+data_100[i,'volume']-data_100[i,'demand'],\n                                 capacity_2nd)\n  data_100[i,'vol_net']=ifelse(data_100[i,'vol_net']&lt;0,0,data_100[i,'vol_net'])\n}\n\n\n\n\nCode\nggplot()+geom_line(data = data_100, aes(x=date, y=vol_net))+\n  ylab('Volume (gallons)')+\n  xlab('Date')\n\n\n\n\n\n\n\n\n\nFigure 2. Daily volume of water collected over summer 2025 in Fort Collins with a 100-gallon rain barrel, given a 7 gallons/day water demand. \n\n\nCode\ndays_empty_100 = sum(data_100$vol_net == 0)\n\n\nThe number of days that the rain barrel is empty for the 48-gallon barrel is 15 days. The number of days that the rain barrel is empty for the 100-gallon barrel is 2 days."
  }
]